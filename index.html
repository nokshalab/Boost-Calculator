<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ফিক্সড রেট অ্যাড ক্যালকুলেটর</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f3f4f6;
        }
        /* Custom Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 5px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        input[type=range]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-white w-full max-w-xl rounded-2xl shadow-xl overflow-hidden border border-gray-100">
        
        <!-- Header -->
        <div class="bg-gray-900 p-6 text-white text-center">
            <h1 class="text-2xl font-bold"><i class="fab fa-facebook-f mr-2"></i> অ্যাড কস্ট এস্টিমেটর</h1>
            <p class="text-gray-400 text-sm mt-1">অটোমেটিক বিলিং সিস্টেম</p>
        </div>

        <div class="p-6 space-y-6">
            
            <!-- 1. Daily Budget Input -->
            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                <label class="block text-blue-900 font-bold mb-2">দৈনিক বাজেট (Dollar)</label>
                <div class="relative">
                    <span class="absolute left-4 top-3.5 text-blue-600 font-bold text-lg">$</span>
                    <input type="number" id="dailyBudget" value="5" min="1" class="w-full pl-10 pr-4 py-3 text-xl font-bold text-gray-800 bg-white border-2 border-blue-200 rounded-lg focus:border-blue-500 focus:outline-none shadow-sm placeholder-gray-300" placeholder="0">
                </div>
            </div>

            <!-- 2. Duration Slider (4 - 100 days) -->
            <div>
                <div class="flex justify-between items-end mb-2">
                    <label class="text-gray-700 font-bold">কত দিন চলবে?</label>
                    <span class="text-2xl font-bold text-blue-600"><span id="daysDisplay">4</span> দিন</span>
                </div>
                <input type="range" id="durationSlider" min="4" max="100" value="4" class="w-full cursor-pointer">
                <div class="flex justify-between text-xs text-gray-400 mt-1">
                    <span>৪ দিন</span>
                    <span>১০০ দিন</span>
                </div>
            </div>

            <!-- 3. Fixed Rate Display (Read Only) -->
            <div class="flex items-center gap-3 opacity-75">
                <div class="w-full">
                    <label class="block text-gray-500 text-sm font-semibold mb-1">ফিক্সড ডলার রেট (টাকায়)</label>
                    <input type="text" value="150" disabled class="w-full bg-gray-100 border border-gray-300 text-gray-500 font-bold py-2 px-3 rounded cursor-not-allowed">
                </div>
            </div>

            <!-- 4. Checkboxes for VAT & Service Charge -->
            <div class="grid grid-cols-2 gap-4">
                <!-- VAT Checkbox -->
                <label class="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition select-none">
                    <input type="checkbox" id="vatCheck" checked class="w-5 h-5 text-blue-600 rounded focus:ring-blue-500">
                    <div>
                        <span class="block text-gray-800 font-semibold">ভ্যাট (VAT)</span>
                        <span class="text-xs text-gray-500">মেটা অ্যাড চার্জ ১৫%</span>
                    </div>
                </label>

                <!-- Service Fee Checkbox -->
                <label class="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition select-none">
                    <input type="checkbox" id="feeCheck" checked class="w-5 h-5 text-green-600 rounded focus:ring-green-500">
                    <div>
                        <span class="block text-gray-800 font-semibold">সার্ভিস চার্জ</span>
                        <span class="text-xs text-gray-500">এজেন্সি ফি ৫%</span>
                    </div>
                </label>
            </div>

            <hr class="border-gray-200">

            <!-- Result Summary -->
            <div class="space-y-3 text-sm">
                <div class="flex justify-between text-gray-600">
                    <span>মোট ডলার খরচ:</span>
                    <span class="font-bold">$<span id="totalUSD">0</span></span>
                </div>
                <div class="flex justify-between text-gray-600">
                    <span>মূল টাকা (Rate ১৫০):</span>
                    <span>৳ <span id="baseBDT">0</span></span>
                </div>
                
                <!-- Hidden/Shown based on checkbox -->
                <div id="vatRow" class="flex justify-between text-red-500">
                    <span>(+) ভ্যাট (১৫%):</span>
                    <span>৳ <span id="vatAmount">0</span></span>
                </div>
                <div id="feeRow" class="flex justify-between text-green-600">
                    <span>(+) সার্ভিস চার্জ (৫%):</span>
                    <span>৳ <span id="feeAmount">0</span></span>
                </div>

                <div class="bg-gray-900 text-white p-4 rounded-lg flex justify-between items-center mt-2 shadow-lg">
                    <span class="font-medium">সর্বমোট প্রদেয়:</span>
                    <span class="text-2xl font-bold">৳ <span id="grandTotal">0</span></span>
                </div>
            </div>

            <!-- Copy Button -->
            <button onclick="copyData()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition shadow-md flex justify-center items-center gap-2">
                <i class="fas fa-copy"></i> ইনভয়েস কপি করুন
            </button>
            <p id="msg" class="text-center text-green-600 text-xs h-4 opacity-0 transition-opacity">কপি করা হয়েছে!</p>

        </div>
    </div>

    <script>
        // Constants
        const FIXED_RATE = 150;

        // Elements
        const dailyInput = document.getElementById('dailyBudget');
        const slider = document.getElementById('durationSlider');
        const daysDisplay = document.getElementById('daysDisplay');
        const vatCheck = document.getElementById('vatCheck');
        const feeCheck = document.getElementById('feeCheck');

        // Display Elements
        const totalUSDDisplay = document.getElementById('totalUSD');
        const baseBDTDisplay = document.getElementById('baseBDT');
        const vatRow = document.getElementById('vatRow');
        const vatAmountDisplay = document.getElementById('vatAmount');
        const feeRow = document.getElementById('feeRow');
        const feeAmountDisplay = document.getElementById('feeAmount');
        const grandTotalDisplay = document.getElementById('grandTotal');

        function calculate() {
            // Get Values
            const daily = parseFloat(dailyInput.value) || 0;
            const days = parseInt(slider.value);
            
            // Update Slider Text
            daysDisplay.innerText = days;

            // Core Logic
            const totalUSD = daily * days;
            const baseBDT = totalUSD * FIXED_RATE;

            // Optional Costs
            let vatBDT = 0;
            let feeBDT = 0;

            if (vatCheck.checked) {
                vatBDT = baseBDT * 0.15; // 15%
                vatRow.style.display = 'flex';
            } else {
                vatRow.style.display = 'none';
            }

            if (feeCheck.checked) {
                feeBDT = baseBDT * 0.05; // 5%
                feeRow.style.display = 'flex';
            } else {
                feeRow.style.display = 'none';
            }

            const finalAmount = baseBDT + vatBDT + feeBDT;

            // Update UI
            totalUSDDisplay.innerText = totalUSD.toFixed(2);
            baseBDTDisplay.innerText = Math.round(baseBDT).toLocaleString('bn-BD');
            vatAmountDisplay.innerText = Math.round(vatBDT).toLocaleString('bn-BD');
            feeAmountDisplay.innerText = Math.round(feeBDT).toLocaleString('bn-BD');
            grandTotalDisplay.innerText = Math.round(finalAmount).toLocaleString('bn-BD');
        }

        function copyData() {
            const total = grandTotalDisplay.innerText;
            const usd = totalUSDDisplay.innerText;
            const days = slider.value;
            
            const text = `অ্যাড বিলিং বিস্তারিত:\nসময়কাল: ${days} দিন\nমোট ডলার: $${usd}\nরেট: ১৫0 টাকা\n-------------------\nসর্বমোট বিল: ৳${total}\n(ভ্যাট ও চার্জ অন্তর্ভুক্ত)`;
            
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            const msg = document.getElementById('msg');
            msg.classList.remove('opacity-0');
            setTimeout(() => msg.classList.add('opacity-0'), 2000);
        }

        // Listeners
        dailyInput.addEventListener('input', calculate);
        slider.addEventListener('input', calculate);
        vatCheck.addEventListener('change', calculate);
        feeCheck.addEventListener('change', calculate);

        // Init
        calculate();
    </script>
</body>
</html>